<!DOCTYPE html>
<html lang="en" >

<head>
		<title>Node.JS Tutorial</title>
		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

		<!-- Latest compiled and minified CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

		<!-- Optional theme -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">

		<!-- Latest compiled and minified JavaScript -->
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

</head>

<body>
    <div class="container">
        <h1>Basics</h1>
        <p>Now that we have talked a little bit about how Node.JS works underneath the covers, and how to write hello world. Let't continue this tutorial by actually creating a Node.JS webapp.</p>
        <h3>Basic Web Server</h3>
        <p>First lets look at a brief example:</p>
        <pre>
            <code>
var http = require("http");

var server = http.createServer(function (request, response) {

   // Send the HTTP header 
   //Sending a response code of OK with plain text Content Type
   response.writeHead(200, {'Content-Type': 'text/plain'});
   
   response.end('This is the content of the web page\n');
});
server.listen();

// Console will print the port
console.log('Server is listening on port 1234');
            </code>
        </pre>
        
        <p>Lets break this code down line by line. The first line </p><code>var http = requre("http");</code> <p>is essentially an import statement. It is including that the program uses the http module. We will talk about this more in the next section but for now just think of it as a collection of related code. Once we imported the http module we can set up an event listener for http requests.</p>
        
        <pre> <code>
var server = http.createServer(function (request, response) {

// Send the HTTP header 
//Sending a response code of OK with plain text Content Type
response.writeHead(200, {'Content-Type': 'text/plain'});
   
response.end('This is the content of the web page\n');
});
        </code></pre>
        <p>This code is creating a variable server that is essentially an event handler that will call the anonymous callback function anytime there is a http request. The call back function writes the http header to be a return status of OK and says the type is plain text. The last thing is it sends the html body. Normally, this is where you load if from a file or generate it on the fly but whatever you send here the clients browser will parse as html.</p>
        
        <br>
        <p>The next line </p> <code>server.listen()</code> tells the Node.JS event queue that you are subscribing the servers handler. Any http request will now be processed. If you leave this line out the event handler will never get registered, and as we explained before the program will exit because the event handler has no handlers to process events.</p>
    
        <br>
        <p>Once the handler is registered then the console prints to the command line the port it is listening on: </p><code>console.log('Server is listening on port 1234');</code> <p> The main.js returns back to the environment which then proceeds to execute the event queue. Untill the program is killed our Node.JS app will continue to process web requests always answering the content.</p>
    
    <br>
    <p>To give this a try save the above code as main.js and execute it by running node main.js. Then open your browser and go to the url: localhost:1234 and watch our basic application.</p>
    </div>
</body>
</html>
